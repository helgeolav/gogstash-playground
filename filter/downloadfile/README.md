# downloadfile

This filter downloads a file to the local filesystem. The source is a HTTP or HTTPS GET call. Authentication is supported
by having means for adding headers to the request. (Including Authorization headers.)

```json
{
  "filter": [
    {
      "type": "downloadfile",
      "url": "message",
      "response": "response_headers",
      "authenticators": [
        {
          "name": "",
          "restrict_to": [
            "www.helge.net"
          ],
          "headers": {
            "Authorization": "Basic YWRtaW46YWRtaW4="
          }
        }
      ]
    }
  ]
}
```

## Including headers

Headers are loaded in this order:

1. From a field in the gogstash event. (The name of the field is specified by the parameter "headers".)
2. From the gogstash configuration file, as shown above.
3. From a file specified by the environment variable FILTERDOWNLOAD_AUTHENTICATOR. (Must be in JSON format.)
4. From the file authenticator.json in the working directory. (Must be in JSON format.)

Each authenticator has an optional name. An authenticator with a blank name will be loaded automatically if the site matches.
In the event you can specify what authenticator to use - the configuration parameter auth specifies what field to look into.

## Placement of the file

The downloaded file is placed in a directory of your choice by specifying "download_dir". If left blank the system default temp dir
is used.

The filename is a unique name generated by the system. The name of the file is placed in the field specified by the configuration parameter "file_name". The default field is "field_name".
